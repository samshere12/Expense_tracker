<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Simple Expense Tracker</title>
</head>
<body>
  <h1>Expense Tracker</h1>

  <form id="form">
    <input id="desc" placeholder="description" />
    <input id="amount" type="number" step="0.01" placeholder="amount" />
    <select id="category">
      <option>Food</option>
      <option>Travel</option>
      <option>Shopping</option>
      <option>Bills</option>
      <option>Other</option>
    </select>
    <button type="submit">Add</button>
  </form>

  <button id="clear">Clear All</button>

  <h2>Total: ₹<span id="total">0.00</span></h2>

  <ul id="list"></ul>

  <script>
    const form = document.getElementById('form')
    const desc = document.getElementById('desc')
    const amount = document.getElementById('amount')
    const category = document.getElementById('category')
    const list = document.getElementById('list')
    const totalEl = document.getElementById('total')
    const clearBtn = document.getElementById('clear')

    let expenses = JSON.parse(localStorage.getItem('expenses') || '[]')

    function format(n){return Number(n).toFixed(2)}

    function save(){localStorage.setItem('expenses', JSON.stringify(expenses))}

    function render(){
      list.innerHTML = ''
      let total = 0
      expenses.forEach((e,i)=>{
        total += Number(e.amount)
        const li = document.createElement('li')
        li.textContent = `${e.desc || e.category} - ${e.category} - ₹${format(e.amount)}`
        const btn = document.createElement('button')
        btn.textContent = 'Remove'
        btn.addEventListener('click', ()=>{expenses.splice(i,1);save();render()})
        li.appendChild(btn)
        list.appendChild(li)
      })
      totalEl.textContent = format(total)
    }

    form.addEventListener('submit', e=>{
      e.preventDefault()
      const a = parseFloat(amount.value)
      if(isNaN(a) || a <= 0) return
      expenses.push({desc: desc.value.trim(), amount: a, category: category.value})
      desc.value = ''
      amount.value = ''
      category.selectedIndex = 0
      save()
      render()
    })

    clearBtn.addEventListener('click', ()=>{if(confirm('Remove all?')){expenses = [];save();render()}})

    render()
  </script>
</body>
</html>
